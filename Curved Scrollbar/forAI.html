<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Curved Scroll</title>

    <style>
      * {
        box-sizing: border-box;
      }

      body {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        height: 100vh;
        background: #f5f5f5;
      }

      .container {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
      }

      .card {
        position: relative;
        margin: 5rem;
        width: 20rem;
        height: 30rem;
        border: solid red;
        border-radius: 15px;
        overflow: hidden;
        background: white;
      }

      /* actual scrolling area */
      .scroll-content {
        height: 100%;
        padding: 1rem 2.5rem 1rem 1rem;
        overflow-y: scroll;
        scroll-behavior: smooth;

        /* hide native scrollbar */
        scrollbar-width: none; /* Firefox */
      }

      .scroll-content::-webkit-scrollbar {
        display: none; /* Chrome / Safari */
      }

      /* curved scrollbar overlay */
      .scroll-ui {
        position: absolute;
        top: 0.5rem;
        right: 0.4rem;
        width: 20px;
        height: calc(100% - 1rem);
        pointer-events: none;
      }

      .scroll-ui svg {
        width: 100%;
        height: 100%;
      }

      .track {
        fill: rgba(0, 128, 0, 0.25);
      }

      .thumb {
        fill: blue;
        transition: y 0.08s linear;
      }

      p {
        margin: 0;
        line-height: 1.5;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <div class="card">
        <div class="scroll-content">
          <p>
            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Officia
            doloribus odio et fuga, deserunt assumenda molestiae iusto alias
            voluptas dolor nemo facilis distinctio explicabo amet praesentium
            blanditiis voluptatum, aliquid, veniam ratione numquam possimus
            harum. Vero porro ea omnis tempore rem consequatur voluptatem autem
            amet debitis tenetur quis, repellat enim itaque voluptates obcaecati
            iste? Dolore repellendus voluptatem rerum possimus, perferendis
            quisquam quos commodi harum eos necessitatibus ad sapiente totam
            modi veniam rem eum vero quas soluta odit dolorum facilis, accusamus
            aut nihil? Repellat consectetur obcaecati eligendi tempora cum dolor
            officiis enim esse reiciendis doloribus nihil explicabo eaque earum
            animi magnam, cumque qui inventore, corporis distinctio voluptate
            laudantium ut perferendis aspernatur. Corporis iure nihil culpa
            inventore sunt incidunt corrupti officia accusamus, itaque,
            asperiores nam ducimus ut magnam maxime dolore quaerat atque beatae
            impedit nostrum ad aliquam earum eum veritatis! Expedita corrupti
            tempora quas vel quisquam accusantium sequi quibusdam ut quam nulla,
            neque fugit eligendi voluptates magni. Sapiente unde atque
            doloremque velit placeat. Ipsa unde obcaecati provident porro
            similique eveniet aspernatur maxime. Expedita placeat ut
            perspiciatis omnis nam enim fugit facilis dolorum.
          </p>
        </div>

        <div class="scroll-ui">
          <svg viewBox="0 0 20 100" preserveAspectRatio="none">
            <path
              d="M10 2
                 Q18 6 18 14
                 L18 86
                 Q18 94 10 98
                 Q2 94 2 86
                 L2 14
                 Q2 6 10 2 Z"
              class="track"
            />
            <rect
              class="thumb"
              x="6"
              y="6"
              rx="6"
              ry="6"
              width="8"
              height="20"
            />
          </svg>
        </div>
      </div>

      <div class="card">
        <div class="scroll-content">
          <p>
            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Officia
            doloribus odio et fuga, deserunt assumenda molestiae iusto alias
            voluptas dolor nemo facilis distinctio explicabo amet praesentium
            blanditiis voluptatum, aliquid, veniam ratione numquam possimus
            harum. Vero porro ea omnis tempore rem consequatur voluptatem autem
            amet debitis tenetur quis, repellat enim itaque voluptates obcaecati
            iste? Dolore repellendus voluptatem rerum possimus, perferendis
            quisquam quos commodi harum eos necessitatibus ad sapiente totam
            modi veniam rem eum vero quas soluta odit dolorum facilis, accusamus
            aut nihil? Repellat consectetur obcaecati eligendi tempora cum dolor
            officiis enim esse reiciendis doloribus nihil explicabo eaque earum
            animi magnam, cumque qui inventore, corporis distinctio voluptate
            laudantium.
          </p>
        </div>

        <div class="scroll-ui">
          <svg viewBox="0 0 20 100" preserveAspectRatio="none">
            <path
              d="M10 2
                 Q18 6 18 14
                 L18 86
                 Q18 94 10 98
                 Q2 94 2 86
                 L2 14
                 Q2 6 10 2 Z"
              class="track"
            />
            <rect
              class="thumb"
              x="6"
              y="6"
              rx="6"
              ry="6"
              width="8"
              height="20"
            />
          </svg>
        </div>
      </div>
    </div>

    <script>
      document.querySelectorAll(".card").forEach((card) => {
        const content = card.querySelector(".scroll-content");
        const thumb = card.querySelector(".thumb");

        const svgHeight = 100;
        const thumbHeight = 20;
        const padding = 6;
        const maxThumbY = svgHeight - thumbHeight - padding * 2;

        function updateThumb() {
          const maxScroll = content.scrollHeight - content.clientHeight;

          const ratio = maxScroll > 0 ? content.scrollTop / maxScroll : 0;

          const y = padding + ratio * maxThumbY;
          thumb.setAttribute("y", y);
        }

        content.addEventListener("scroll", updateThumb);
        updateThumb();
      });
    </script>
  </body>
</html>
